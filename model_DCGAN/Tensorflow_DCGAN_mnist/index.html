


<!doctype html>
<html lang="ja" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-5.1.5">
    
    
      
        <title>MNIST DCGAN(Deep Convolution Generative Adversarial Network) - FaBo TensorFlow Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.df84b5fe.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    
      
    
    
  </head>
  
  
    <body dir="">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#mnist-dcgandeep-convolution-generative-adversarial-network" class="md-skip">
          コンテンツにスキップ
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="">
    <a href="../.." title="FaBo TensorFlow Docs" class="md-header-nav__button md-logo" aria-label="FaBo TensorFlow Docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            FaBo TensorFlow Docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              MNIST DCGAN(Deep Convolution Generative Adversarial Network)
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="検索" placeholder="検索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="FaBo TensorFlow Docs" class="md-nav__button md-logo" aria-label="FaBo TensorFlow Docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    FaBo TensorFlow Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="TensorFlow Docs" class="md-nav__link">
      TensorFlow Docs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../SUMMARY/" title="SUMMARY" class="md-nav__link">
      SUMMARY
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../tensorflow_operator/" title="Tensor(行列)の和" class="md-nav__link">
      Tensor(行列)の和
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Android
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Android" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Android
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../android/build/" title="Build" class="md-nav__link">
      Build
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../android/build_cmake/" title="Build cmake" class="md-nav__link">
      Build cmake
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../android/build_hexagon/" title="Build hexagon" class="md-nav__link">
      Build hexagon
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../android/build_osx/" title="Build osx" class="md-nav__link">
      Build osx
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../android/build_osx_bazel/" title="Build osx bazel" class="md-nav__link">
      Build osx bazel
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../android/load_model/" title="モデルデータを読込" class="md-nav__link">
      モデルデータを読込
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../android/load_model2/" title="モデルデータを読込 その2" class="md-nav__link">
      モデルデータを読込 その2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../android/load_model3/" title="モデルデータを読込 tensorflow1.0.1" class="md-nav__link">
      モデルデータを読込 tensorflow1.0.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../android/load_trained/" title="Load trained" class="md-nav__link">
      Load trained
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../android/run/" title="学習済みモデルを実行する" class="md-nav__link">
      学習済みモデルを実行する
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../android/version/" title="Versionを表示する" class="md-nav__link">
      Versionを表示する
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Building graph
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Building graph" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Building graph
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../building_graph/tensorflow_graph_part1/" title="Tensorflowのグラフ操作 Part1" class="md-nav__link">
      Tensorflowのグラフ操作 Part1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../building_graph/tensorflow_graph_part2/" title="Tensorflowのグラフ操作 Part2" class="md-nav__link">
      Tensorflowのグラフ操作 Part2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../building_graph/tensorflow_graph_part3/" title="Tensorflowのグラフ操作 Part3" class="md-nav__link">
      Tensorflowのグラフ操作 Part3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../building_graph/tensorflow_protocol_buffers_part1/" title="プロトコルバッファ Part1" class="md-nav__link">
      プロトコルバッファ Part1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../building_graph/tensorflow_protocol_buffers_part2/" title="プロトコルバッファ Part2" class="md-nav__link">
      プロトコルバッファ Part2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../building_graph/tensorflow_protocol_buffers_part3/" title="プロトコルバッファ Part3" class="md-nav__link">
      プロトコルバッファ Part3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../building_graph/tensorflow_protocol_buffers_part4/" title="プロトコルバッファ Part4" class="md-nav__link">
      プロトコルバッファ Part4
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Cloudml
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Cloudml" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Cloudml
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cloudml/cloudml/" title="CloudMLで必要なパッケージを有効にする" class="md-nav__link">
      CloudMLで必要なパッケージを有効にする
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cloudml/emacs/" title="Emacsの操作" class="md-nav__link">
      Emacsの操作
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cloudml/versionup/" title="TensorFlowのVersion UP" class="md-nav__link">
      TensorFlowのVersion UP
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Datalab
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Datalab" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Datalab
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../datalab/datalab/" title="Google Cloud DataLab" class="md-nav__link">
      Google Cloud DataLab
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../datalab/datalab_update_tf1/" title="Google Cloud DataLabのTensorFlowをUpdate" class="md-nav__link">
      Google Cloud DataLabのTensorFlowをUpdate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../datalab/python_update/" title="Python2からPython3.x系へのアップデート" class="md-nav__link">
      Python2からPython3.x系へのアップデート
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      develop Jetson
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="develop Jetson" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        develop Jetson
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop-Jetson/" title="Jetson TX2 環境構築" class="md-nav__link">
      Jetson TX2 環境構築
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-2" type="checkbox" id="nav-8-2">
    
    <label class="md-nav__link" for="nav-8-2">
      Jetson TX2
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Jetson TX2" data-md-level="2">
      <label class="md-nav__title" for="nav-8-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Jetson TX2
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop-Jetson/Jetson-TX2/JetpackforMac/" title="JetpackforMac" class="md-nav__link">
      JetpackforMac
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-2-2" type="checkbox" id="nav-8-2-2">
    
    <label class="md-nav__link" for="nav-8-2-2">
      JetPack3.1
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="JetPack3.1" data-md-level="3">
      <label class="md-nav__title" for="nav-8-2-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        JetPack3.1
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop-Jetson/Jetson-TX2/JetPack3.1/" title="Jetson TX2 環境構築" class="md-nav__link">
      Jetson TX2 環境構築
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-2-2-2" type="checkbox" id="nav-8-2-2-2">
    
    <label class="md-nav__link" for="nav-8-2-2-2">
      With python3.6 custom packages
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="With python3.6 custom packages" data-md-level="4">
      <label class="md-nav__title" for="nav-8-2-2-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        With python3.6 custom packages
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop-Jetson/Jetson-TX2/JetPack3.1/with_python3.6_custom_packages/spidev_jetpack3.1/" title="Jetson TX2 SPIdevを有効化" class="md-nav__link">
      Jetson TX2 SPIdevを有効化
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-2-3" type="checkbox" id="nav-8-2-3">
    
    <label class="md-nav__link" for="nav-8-2-3">
      JetPack3.2
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="JetPack3.2" data-md-level="3">
      <label class="md-nav__title" for="nav-8-2-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        JetPack3.2
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop-Jetson/Jetson-TX2/JetPack3.2/" title="Jetson TX2 環境構築" class="md-nav__link">
      Jetson TX2 環境構築
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Develop ubuntu
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Develop ubuntu" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Develop ubuntu
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop-ubuntu/" title="TensorFlow Ubuntu 開発環境" class="md-nav__link">
      TensorFlow Ubuntu 開発環境
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop-ubuntu/docker-command/" title="Docker Commandについて" class="md-nav__link">
      Docker Commandについて
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9-3" type="checkbox" id="nav-9-3">
    
    <label class="md-nav__link" for="nav-9-3">
      Aws ec2
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Aws ec2" data-md-level="2">
      <label class="md-nav__title" for="nav-9-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Aws ec2
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop-ubuntu/aws-ec2/" title="開発環境 AWS p3.2xlarge/p2.xlarge Ubuntu 16.04 LTS" class="md-nav__link">
      開発環境 AWS p3.2xlarge/p2.xlarge Ubuntu 16.04 LTS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop-ubuntu/aws-ec2/aws-instance/" title="AWS INSTANCE OS INFO" class="md-nav__link">
      AWS INSTANCE OS INFO
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop-ubuntu/aws-ec2/aws-tensorflow-gpu-r1.4.1/" title="LAUNCH" class="md-nav__link">
      LAUNCH
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9-4" type="checkbox" id="nav-9-4">
    
    <label class="md-nav__link" for="nav-9-4">
      R1.0.1
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="R1.0.1" data-md-level="2">
      <label class="md-nav__title" for="nav-9-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        R1.0.1
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop-ubuntu/r1.0.1/aws-ec2-docker-cpu/" title="AWS Ubuntu 16.04" class="md-nav__link">
      AWS Ubuntu 16.04
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop-ubuntu/r1.0.1/aws-ec2-docker-gpu/" title="AWS Ubuntu 16.04" class="md-nav__link">
      AWS Ubuntu 16.04
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop-ubuntu/r1.0.1/vm-docker-cpu/" title="仮想マシン上のUbuntu 16.04" class="md-nav__link">
      仮想マシン上のUbuntu 16.04
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop-ubuntu/r1.0.1/vm-docker-datalab-cpu/" title="仮想マシン上のUbuntu 16.04" class="md-nav__link">
      仮想マシン上のUbuntu 16.04
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9-5" type="checkbox" id="nav-9-5">
    
    <label class="md-nav__link" for="nav-9-5">
      R1.1.0+c++
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="R1.1.0+c++" data-md-level="2">
      <label class="md-nav__title" for="nav-9-5">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        R1.1.0+c++
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop-ubuntu/r1.1.0%2Bc%2B%2B/aws-ec2-docker-git-c%2B%2B/" title="AWS Ubuntu 16.04 - TensorFlor GPU/XLA Python/C++" class="md-nav__link">
      AWS Ubuntu 16.04 - TensorFlor GPU/XLA Python/C++
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9-6" type="checkbox" id="nav-9-6">
    
    <label class="md-nav__link" for="nav-9-6">
      R1.2+c++
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="R1.2+c++" data-md-level="2">
      <label class="md-nav__title" for="nav-9-6">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        R1.2+c++
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop-ubuntu/r1.2%2Bc%2B%2B/aws-ec2-docker-git-c%2B%2B/" title="AWS Ubuntu 16.04 - TensorFlor r1.2 GPU/XLA/MKL Python/C++" class="md-nav__link">
      AWS Ubuntu 16.04 - TensorFlor r1.2 GPU/XLA/MKL Python/C++
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9-7" type="checkbox" id="nav-9-7">
    
    <label class="md-nav__link" for="nav-9-7">
      R1.2.1+c++
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="R1.2.1+c++" data-md-level="2">
      <label class="md-nav__title" for="nav-9-7">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        R1.2.1+c++
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../develop-ubuntu/r1.2.1%2Bc%2B%2B/aws-ec2-docker-git-c%2B%2B/" title="AWS Ubuntu 16.04 - TensorFlor r1.2.1 CPU/XLA/MKL/CPU最適化 Python/C++" class="md-nav__link">
      AWS Ubuntu 16.04 - TensorFlor r1.2.1 CPU/XLA/MKL/CPU最適化 Python/C++
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      End2end
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="End2end" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        End2end
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../end2end/dev/" title="開発環境" class="md-nav__link">
      開発環境
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../end2end/dev_mac/" title="Dev mac" class="md-nav__link">
      Dev mac
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../end2end/emulator/" title="Emulator" class="md-nav__link">
      Emulator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../end2end/link/" title="リンク" class="md-nav__link">
      リンク
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../end2end/model/" title="Model" class="md-nav__link">
      Model
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../end2end/package/" title="必要なパッケージ" class="md-nav__link">
      必要なパッケージ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../end2end/run/" title="Run" class="md-nav__link">
      Run
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      Link
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Link" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Link
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../link/link/" title="Link" class="md-nav__link">
      Link
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      Local
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Local" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Local
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../local/local/" title="Local環境の整備" class="md-nav__link">
      Local環境の整備
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-13" type="checkbox" id="nav-13">
    
    <label class="md-nav__link" for="nav-13">
      Matplotlib
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Matplotlib" data-md-level="1">
      <label class="md-nav__title" for="nav-13">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Matplotlib
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../matplotlib/matplotlib/" title="Matplotlib" class="md-nav__link">
      Matplotlib
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../matplotlib/matplotlib_line/" title="線を引く" class="md-nav__link">
      線を引く
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../matplotlib/matplotlib_point/" title="点をうつ" class="md-nav__link">
      点をうつ
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-14" type="checkbox" id="nav-14" checked>
    
    <label class="md-nav__link" for="nav-14">
      model DCGAN
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="model DCGAN" data-md-level="1">
      <label class="md-nav__title" for="nav-14">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        model DCGAN
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        MNIST DCGAN(Deep Convolution Generative Adversarial Network)
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="MNIST DCGAN(Deep Convolution Generative Adversarial Network)" class="md-nav__link md-nav__link--active">
      MNIST DCGAN(Deep Convolution Generative Adversarial Network)
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="目次">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      目次
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#dcgan" class="md-nav__link">
    DCGANの変更点
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dcgan_1" class="md-nav__link">
    DCGANの構造
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tensorflowdcgan" class="md-nav__link">
    Tensorflowを用いたDCGANの実装
  </a>
  
    <nav class="md-nav" aria-label="Tensorflowを用いたDCGANの実装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generator" class="md-nav__link">
    Generatorの実装
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#discriminator" class="md-nav__link">
    Discriminatorの実装
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dcgan_2" class="md-nav__link">
    DCGAN
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    学習
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notebook" class="md-nav__link">
    Notebook
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-15" type="checkbox" id="nav-15">
    
    <label class="md-nav__link" for="nav-15">
      model GAN
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="model GAN" data-md-level="1">
      <label class="md-nav__title" for="nav-15">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        model GAN
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_GAN/Tensorflow_GAN_mnist/" title="MNIST GAN(Generative Adversarial Network)" class="md-nav__link">
      MNIST GAN(Generative Adversarial Network)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-16" type="checkbox" id="nav-16">
    
    <label class="md-nav__link" for="nav-16">
      Model basic
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Model basic" data-md-level="1">
      <label class="md-nav__title" for="nav-16">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Model basic
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_basic/tensorflow_argmin/" title="最小値・最大値" class="md-nav__link">
      最小値・最大値
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_basic/tensorflow_boolean/" title="Boolean tensor" class="md-nav__link">
      Boolean tensor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_basic/tensorflow_cast/" title="キャスト" class="md-nav__link">
      キャスト
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_basic/tensorflow_clip_by_value/" title="Tensorのクリッピング" class="md-nav__link">
      Tensorのクリッピング
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_basic/tensorflow_comparison/" title="Tensorの比較" class="md-nav__link">
      Tensorの比較
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_basic/tensorflow_data_augment/" title="データ拡張" class="md-nav__link">
      データ拡張
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_basic/tensorflow_flags/" title="コマンドライン引数の処理" class="md-nav__link">
      コマンドライン引数の処理
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_basic/tensorflow_hello/" title="HelloWorld" class="md-nav__link">
      HelloWorld
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_basic/tensorflow_l2_norm/" title="L2正則化" class="md-nav__link">
      L2正則化
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_basic/tensorflow_model/" title="モデルデータの保存と読み込み" class="md-nav__link">
      モデルデータの保存と読み込み
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_basic/tensorflow_normal/" title="標準正規分布のTensorを作る" class="md-nav__link">
      標準正規分布のTensorを作る
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_basic/tensorflow_operator/" title="Tensor(行列)の和" class="md-nav__link">
      Tensor(行列)の和
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_basic/tensorflow_pack/" title="Tensorの集約" class="md-nav__link">
      Tensorの集約
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_basic/tensorflow_placeholder/" title="Constant" class="md-nav__link">
      Constant
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_basic/tensorflow_read_csv/" title="CSV形式のファイルを読み込む" class="md-nav__link">
      CSV形式のファイルを読み込む
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_basic/tensorflow_read_img/" title="画像を読み込む" class="md-nav__link">
      画像を読み込む
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_basic/tensorflow_read_tfrecords/" title="TFRecords形式のファイルを読み込む" class="md-nav__link">
      TFRecords形式のファイルを読み込む
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_basic/tensorflow_session/" title="セッションの保存・読み込み" class="md-nav__link">
      セッションの保存・読み込み
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_basic/tensorflow_sum/" title="Tensorの総和" class="md-nav__link">
      Tensorの総和
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_basic/tensorflow_type/" title="Tensorの型・次元数・ランク・サイズ" class="md-nav__link">
      Tensorの型・次元数・ランク・サイズ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_basic/tensorflow_write_tfrecords/" title="TFRecords形式のファイルを書き込む" class="md-nav__link">
      TFRecords形式のファイルを書き込む
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-17" type="checkbox" id="nav-17">
    
    <label class="md-nav__link" for="nav-17">
      Model linear
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Model linear" data-md-level="1">
      <label class="md-nav__title" for="nav-17">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Model linear
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_linear/tensorflow_linear01/" title="線形回帰" class="md-nav__link">
      線形回帰
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_linear/tensorflow_linear02/" title="線形回帰 TensorBoard1" class="md-nav__link">
      線形回帰 TensorBoard1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_linear/tensorflow_linear03/" title="線形回帰 TensorBoard2" class="md-nav__link">
      線形回帰 TensorBoard2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_linear/tensorflow_linear04/" title="線形回帰 解析" class="md-nav__link">
      線形回帰 解析
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_linear/tensorflow_linear05/" title="線形回帰 課題" class="md-nav__link">
      線形回帰 課題
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_linear/tensorflow_mse/" title="平均二乗誤差" class="md-nav__link">
      平均二乗誤差
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-18" type="checkbox" id="nav-18">
    
    <label class="md-nav__link" for="nav-18">
      Model logstic
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Model logstic" data-md-level="1">
      <label class="md-nav__title" for="nav-18">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Model logstic
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_logstic/classification_sample/" title="乱数からデータセットを作り、クラス分類を行う" class="md-nav__link">
      乱数からデータセットを作り、クラス分類を行う
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_logstic/tensorflow_cross_entropy/" title="交差エントロピーコスト関数" class="md-nav__link">
      交差エントロピーコスト関数
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_logstic/tensorflow_iris_adam/" title="Adam" class="md-nav__link">
      Adam
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_logstic/tensorflow_iris_momentum/" title="モーメンタム" class="md-nav__link">
      モーメンタム
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_logstic/tensorflow_logistic_cancer01/" title="ガン評価 準備" class="md-nav__link">
      ガン評価 準備
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_logstic/tensorflow_logistic_cancer02/" title="ガン評価 学習" class="md-nav__link">
      ガン評価 学習
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_logstic/tensorflow_logistic_virus01/" title="ウィルス分布 データ作成" class="md-nav__link">
      ウィルス分布　データ作成
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_logstic/tensorflow_logistic_virus02/" title="ウィルス分布 学習" class="md-nav__link">
      ウィルス分布　学習
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_logstic/tensorflow_logistic_virus03/" title="ロジスティック回帰 学習済みデータ" class="md-nav__link">
      ロジスティック回帰 学習済みデータ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_logstic/tensorflow_logistic_virus_anroid/" title="ロジスティック回帰 Androidで動作" class="md-nav__link">
      ロジスティック回帰 Androidで動作
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_logstic/tensorflow_logistic_wine01/" title="ワイン評価" class="md-nav__link">
      ワイン評価
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_logstic/tensorflow_logistic_wine02/" title="ワイン評価" class="md-nav__link">
      ワイン評価
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_logstic/tensorflow_three_classification_first/" title="3クラス分類 準備編" class="md-nav__link">
      3クラス分類 準備編
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_logstic/tensorflow_three_classification_last/" title="3クラス分類" class="md-nav__link">
      3クラス分類
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_logstic/tensorflow_three_classification_makepb/" title="3クラス分類 PBファイル作成" class="md-nav__link">
      3クラス分類 PBファイル作成
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_logstic/tensorflow_three_classification_tensorboard/" title="3クラス分類 Tensorboard編" class="md-nav__link">
      3クラス分類 Tensorboard編
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_logstic/tensorflow_three_classification_testpb/" title="3クラス分類 PBファイルテスト編" class="md-nav__link">
      3クラス分類 PBファイルテスト編
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-19" type="checkbox" id="nav-19">
    
    <label class="md-nav__link" for="nav-19">
      Model mnist
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Model mnist" data-md-level="1">
      <label class="md-nav__title" for="nav-19">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Model mnist
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_mnist/Learning_myDataset/" title="任意のデータセットでMNISTのような画像認識を行う その2" class="md-nav__link">
      任意のデータセットでMNISTのような画像認識を行う　その2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_mnist/createDataset/" title="任意のデータセットでMNISTのような画像認識を行う その1" class="md-nav__link">
      任意のデータセットでMNISTのような画像認識を行う　その1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_mnist/tensorflow_activation_func/" title="活性化関数・出力層の関数" class="md-nav__link">
      活性化関数・出力層の関数
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_mnist/tensorflow_cnn_mnist_01/" title="MNIST 畳込みニューラルネットワーク 準備編" class="md-nav__link">
      MNIST 畳込みニューラルネットワーク 準備編
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_mnist/tensorflow_cnn_mnist_02/" title="MNIST 畳込みニューラルネットワーク" class="md-nav__link">
      MNIST 畳込みニューラルネットワーク
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_mnist/tensorflow_cnn_mnist_03/" title="MNIST 畳込みニューラルネットワーク 重み減衰" class="md-nav__link">
      MNIST 畳込みニューラルネットワーク 重み減衰
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_mnist/tensorflow_cnn_mnist_04/" title="MNIST 畳込みニューラルネットワーク TensorBoard編" class="md-nav__link">
      MNIST 畳込みニューラルネットワーク TensorBoard編
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_mnist/tensorflow_cnn_mnist_05/" title="MNIST 畳込みニューラルネットワーク セッションの保存・書込み" class="md-nav__link">
      MNIST 畳込みニューラルネットワーク セッションの保存・書込み
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_mnist/tensorflow_cnn_mnist_06/" title="MNIST 畳込みニューラルネットワーク バッチ正規化" class="md-nav__link">
      MNIST 畳込みニューラルネットワーク バッチ正規化
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_mnist/tensorflow_deep_dream/" title="DeepDream" class="md-nav__link">
      DeepDream
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_mnist/tensorflow_fitting/" title="多項式フィッティング" class="md-nav__link">
      多項式フィッティング
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_mnist/tensorflow_logistic_regression_last2/" title="ロジスティック回帰" class="md-nav__link">
      ロジスティック回帰
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_mnist/tensorflow_math_func/" title="基本的な数学関数" class="md-nav__link">
      基本的な数学関数
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_mnist/tensorflow_matrix_func/" title="行列関数" class="md-nav__link">
      行列関数
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_mnist/tensorflow_mnist_batch/" title="MNISTデータセットのバッチ読み込み" class="md-nav__link">
      MNISTデータセットのバッチ読み込み
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_mnist/tensorflow_mnist_download/" title="MNISTデータセットのダウンロード" class="md-nav__link">
      MNISTデータセットのダウンロード
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_mnist/tensorflow_mnist_info/" title="MNISTデータセットの情報" class="md-nav__link">
      MNISTデータセットの情報
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_mnist/tensorflow_mnist_load/" title="MNISTデータセットの読み込み" class="md-nav__link">
      MNISTデータセットの読み込み
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_mnist/tensorflow_perceptron_fitting/" title="パーセプトロンによるフィッティング" class="md-nav__link">
      パーセプトロンによるフィッティング
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-20" type="checkbox" id="nav-20">
    
    <label class="md-nav__link" for="nav-20">
      Model sequence
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Model sequence" data-md-level="1">
      <label class="md-nav__title" for="nav-20">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Model sequence
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../model_sequence/rnn_basic/" title="RNNによるクラス分類" class="md-nav__link">
      RNNによるクラス分類
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-21" type="checkbox" id="nav-21">
    
    <label class="md-nav__link" for="nav-21">
      Numpy
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Numpy" data-md-level="1">
      <label class="md-nav__title" for="nav-21">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Numpy
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../numpy/numpy006/" title="行列の演算" class="md-nav__link">
      行列の演算
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../numpy/numpy007/" title="乱数のシード" class="md-nav__link">
      乱数のシード
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../numpy/numpy008/" title="スライシング" class="md-nav__link">
      スライシング
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../numpy/numpy009/" title="ブールインデックス" class="md-nav__link">
      ブールインデックス
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../numpy/numpy010/" title="転置行列" class="md-nav__link">
      転置行列
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../numpy/numpy011/" title="numpyオブジェクトの保存・読み込み" class="md-nav__link">
      numpyオブジェクトの保存・読み込み
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../numpy/numpy012/" title="CSVファイルの読み込み・保存" class="md-nav__link">
      CSVファイルの読み込み・保存
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../numpy/numpy013/" title="numpyオブジェクトの型・次元数・サイズ" class="md-nav__link">
      numpyオブジェクトの型・次元数・サイズ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../numpy/numpy014/" title="平均・分散・標準偏差" class="md-nav__link">
      平均・分散・標準偏差
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../numpy/numpy015/" title="ユニバーサル関数" class="md-nav__link">
      ユニバーサル関数
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../numpy/numpy_arrmat/" title="配列からTensor(行列)を作る" class="md-nav__link">
      配列からTensor(行列)を作る
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../numpy/numpy_concat/" title="結合関数" class="md-nav__link">
      結合関数
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../numpy/numpy_copy/" title="Numpyオブジェクトのコピー" class="md-nav__link">
      Numpyオブジェクトのコピー
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../numpy/numpy_flatten/" title="平坦化" class="md-nav__link">
      平坦化
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../numpy/numpy_matrix_func/" title="行列関数" class="md-nav__link">
      行列関数
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../numpy/numpy_newaxis/" title="次元の増加" class="md-nav__link">
      次元の増加
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../numpy/numpy_randn/" title="標準正規分布のTensor(行列)を作る" class="md-nav__link">
      標準正規分布のTensor(行列)を作る
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../numpy/numpy_random/" title="さまざまな分布に従う乱数" class="md-nav__link">
      さまざまな分布に従う乱数
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../numpy/numpy_repeat/" title="配列の繰り返し" class="md-nav__link">
      配列の繰り返し
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../numpy/numpy_set_func/" title="集合関数" class="md-nav__link">
      集合関数
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../numpy/numpy_sort/" title="ソート" class="md-nav__link">
      ソート
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../numpy/numpy_zeroarray/" title="ゼロのはいった配列を作る" class="md-nav__link">
      ゼロのはいった配列を作る
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../numpy/numpy_zerotensor/" title="ゼロのはいったTensor(行列)を作る" class="md-nav__link">
      ゼロのはいったTensor(行列)を作る
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-22" type="checkbox" id="nav-22">
    
    <label class="md-nav__link" for="nav-22">
      raspberryPI
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="raspberryPI" data-md-level="1">
      <label class="md-nav__title" for="nav-22">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        raspberryPI
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../raspberryPI/build/" title="RaspberryPiにTensorFlowをインストールする" class="md-nav__link">
      RaspberryPiにTensorFlowをインストールする
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../raspberryPI/mnist_on_rp3/" title="RaspberryPiで学習済みニューラルネットを動かす" class="md-nav__link">
      RaspberryPiで学習済みニューラルネットを動かす
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../raspberryPI/raspberry-network/" title="RaspberryPi3 (OS:Raspbian) ネットワーク接続" class="md-nav__link">
      RaspberryPi3 (OS:Raspbian) ネットワーク接続
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="目次">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      目次
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#dcgan" class="md-nav__link">
    DCGANの変更点
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dcgan_1" class="md-nav__link">
    DCGANの構造
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tensorflowdcgan" class="md-nav__link">
    Tensorflowを用いたDCGANの実装
  </a>
  
    <nav class="md-nav" aria-label="Tensorflowを用いたDCGANの実装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generator" class="md-nav__link">
    Generatorの実装
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#discriminator" class="md-nav__link">
    Discriminatorの実装
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dcgan_2" class="md-nav__link">
    DCGAN
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    学習
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notebook" class="md-nav__link">
    Notebook
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                <h1 id="mnist-dcgandeep-convolution-generative-adversarial-network">MNIST DCGAN(Deep Convolution Generative Adversarial Network)</h1>
<p><a href="https://arxiv.org/abs/1511.06434">DCGANの論文はこちら</a>        </p>
<p>DCGANは2015年頃に提案されたGANを拡張したものである。         <br />
GANと同様にGeneratorとDiscriminatorの2つのモデルを持つが、モデルの内部構造が異なる。         </p>
<h3 id="dcgan">DCGANの変更点</h3>
<p>最初に提案されたGANでは     <br />
* 学習が不安定なこと
* Generatorが生成するデータにノイズが含まれていたり、データ自体が意味的に、視覚的に理解が難しいものが生成されること    </p>
<p>などといった問題があげられる。     <br />
DCGANでは次のような変更点を加えることで上記の問題の改善をしている。      </p>
<ul>
<li>
<p>GeneratorとDiscriminatorのネットワーク構造を多層パーセプトロン(MLP)ではなく<b>畳み込みニューラルネットワーク</b>(CNN)を使って構築すること。またCNNでは畳み込み層の次に最大プーリング(Max Pooling)を適用しているものが多いが、DCGANでは Max Pooling などを無くした<u>畳み込み層のみからなる</u> <b>All Convolution Net</b>というCNNを採用する。      </p>
</li>
<li>
<p>AlexnetなどのCNNでは何層もの畳み込み層と最大プーリング層の後、出力には最後の畳み込みの値を平坦化(Flatten)して全結合層に渡して計算したものを出力としているのが多い。
DCGANではGeneratorとDiscriminatorの<u>出力に全結合層を用いない</u>。逆に全結合層を排除するとも言える。そのためGeneratorの出力は最後の畳み込みの値に活性化関数を適用したものを、Discriminatorの出力には最後の畳み込みの値を平均プーリングしたものを出力とする。           </p>
</li>
<li>
<p>学習の不安定さの対策として両モデルの中間の畳み込み層に<b>バッチ正規化(Batch Normalization)</b>を適用する。        </p>
</li>
</ul>
<p>これらの変更で、以前のGANより学習が安定して、かつ精密なものを生成できるようになっている。        </p>
<h3 id="dcgan_1">DCGANの構造</h3>
<p>既に述べたのようにGeneratorとDiscriminatorはCNNで構築する。     <br />
論文では生成モデルのネットワーク構造として以下の図が載っている。       </p>
<p><img alt="" src="/img/dcgan_nn_ronbun.png" />       </p>
<p>ここでは載っていないが、畳み込み層のあとにバッチ正規化を適用したものをLeakyRelu関数などの活性化関数で活性化して次の畳み込み層に渡す。    <br />
またGeneratorでの畳み込みは、<u>アップサンプリング</u>(誤ってデコンボリューションとも)と呼ばれる畳み込みである。         </p>
<p>Generatorでは中間層の活性化関数にRelu関数、出力層の活性化関数にTanh関数を用い、Discriminatorには中間層の活性化関数にLeakyRelu関数、出力層の活性化関数にSigmoid関数を用いると論文にて説明されている。        </p>
<p>DCGANでの目的関数はGANと同様であるので省略する       </p>
<h3 id="tensorflowdcgan">Tensorflowを用いたDCGANの実装</h3>
<p>MNISTの訓練データを使って精度の確認をする。     <br />
ここでは論文通りのネットワーク構造ではなく3層で、各層のパラメータのユニット数を削減し、出力を<code>64*64</code>から<code>28*28</code>に変更したものを実装する     <br />
またDiscriminatorの畳み込みのパラメータにだけ重み減衰を適用する       </p>
<h4 id="generator">Generatorの実装</h4>
<p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106</pre></div></td><td class=code><div class=codehilite><pre><span></span><code><span class=k>def</span> <span class=nf>batch_norm</span><span class=p>(</span><span class=n>X</span><span class=p>,</span> <span class=n>scale</span><span class=p>,</span> <span class=n>offset</span><span class=p>,</span> <span class=n>axes</span><span class=p>,</span> <span class=n>is_train</span><span class=p>,</span> <span class=n>device_name</span><span class=o>=</span><span class=s1>&#39;/cpu:0&#39;</span><span class=p>):</span>
    <span class=c1># 予測のときにはそのまんまの値を返す</span>
    <span class=k>if</span> <span class=n>is_train</span> <span class=ow>is</span> <span class=kc>False</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>X</span>

    <span class=n>epsilon</span> <span class=o>=</span> <span class=mf>1e-5</span>
    <span class=k>with</span> <span class=n>tf</span><span class=o>.</span><span class=n>device</span><span class=p>(</span><span class=n>device_name</span><span class=p>):</span>
        <span class=n>mean</span><span class=p>,</span> <span class=n>variance</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>nn</span><span class=o>.</span><span class=n>moments</span><span class=p>(</span><span class=n>X</span><span class=p>,</span> <span class=n>axes</span><span class=p>)</span>
        <span class=n>bn</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>nn</span><span class=o>.</span><span class=n>batch_normalization</span><span class=p>(</span><span class=n>X</span><span class=p>,</span> <span class=n>mean</span><span class=p>,</span> <span class=n>variance</span><span class=p>,</span> <span class=n>offset</span><span class=p>,</span> <span class=n>scale</span><span class=p>,</span><span class=n>epsilon</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>bn</span>

<span class=k>class</span> <span class=nc>Generator</span><span class=p>():</span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>device_name</span><span class=o>=</span><span class=s1>&#39;/cpu:0&#39;</span><span class=p>):</span>

        <span class=c1># Generator parameter</span>
        <span class=k>with</span> <span class=n>tf</span><span class=o>.</span><span class=n>device</span><span class=p>(</span><span class=n>device_name</span><span class=p>):</span>

            <span class=bp>self</span><span class=o>.</span><span class=n>gen_w0</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>Variable</span><span class=p>(</span>
                <span class=n>tf</span><span class=o>.</span><span class=n>random_normal</span><span class=p>(</span>
                    <span class=n>shape</span><span class=o>=</span><span class=p>[</span><span class=mi>100</span><span class=p>,</span><span class=mi>4</span><span class=o>*</span><span class=mi>4</span><span class=o>*</span><span class=mi>256</span><span class=p>],</span> <span class=n>stddev</span><span class=o>=</span><span class=mf>0.02</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>tf</span><span class=o>.</span><span class=n>float32</span><span class=p>),</span>
                <span class=n>name</span><span class=o>=</span><span class=s2>&quot;gen_w0&quot;</span><span class=p>)</span>

            <span class=bp>self</span><span class=o>.</span><span class=n>gen_b0</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>Variable</span><span class=p>(</span>
                <span class=n>tf</span><span class=o>.</span><span class=n>random_normal</span><span class=p>(</span>
                    <span class=n>shape</span><span class=o>=</span><span class=p>[</span><span class=mi>4</span><span class=o>*</span><span class=mi>4</span><span class=o>*</span><span class=mi>256</span><span class=p>],</span> <span class=n>stddev</span><span class=o>=</span><span class=mf>0.02</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>tf</span><span class=o>.</span><span class=n>float32</span><span class=p>),</span>
                <span class=n>name</span><span class=o>=</span><span class=s2>&quot;gen_b0&quot;</span><span class=p>)</span>    

            <span class=bp>self</span><span class=o>.</span><span class=n>gen_w1</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>Variable</span><span class=p>(</span>
                <span class=n>tf</span><span class=o>.</span><span class=n>random_normal</span><span class=p>(</span>
                    <span class=n>shape</span><span class=o>=</span><span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>128</span><span class=p>,</span> <span class=mi>256</span><span class=p>],</span> <span class=n>stddev</span><span class=o>=</span><span class=mf>0.02</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>tf</span><span class=o>.</span><span class=n>float32</span><span class=p>),</span>
                <span class=n>name</span><span class=o>=</span><span class=s2>&quot;gen_w1&quot;</span><span class=p>)</span>

            <span class=bp>self</span><span class=o>.</span><span class=n>gen_b1</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>Variable</span><span class=p>(</span>
                <span class=n>tf</span><span class=o>.</span><span class=n>random_normal</span><span class=p>(</span>
                    <span class=n>shape</span><span class=o>=</span><span class=p>[</span><span class=mi>128</span><span class=p>],</span> <span class=n>stddev</span><span class=o>=</span><span class=mf>0.02</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>tf</span><span class=o>.</span><span class=n>float32</span><span class=p>),</span>
                <span class=n>name</span><span class=o>=</span><span class=s2>&quot;gen_b1&quot;</span><span class=p>)</span>

            <span class=bp>self</span><span class=o>.</span><span class=n>gen_w2</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>Variable</span><span class=p>(</span>
                <span class=n>tf</span><span class=o>.</span><span class=n>random_normal</span><span class=p>(</span>
                    <span class=n>shape</span><span class=o>=</span><span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>64</span><span class=p>,</span> <span class=mi>128</span><span class=p>],</span> <span class=n>stddev</span><span class=o>=</span><span class=mf>0.02</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>tf</span><span class=o>.</span><span class=n>float32</span><span class=p>),</span>
                <span class=n>name</span><span class=o>=</span><span class=s2>&quot;gen_w2&quot;</span><span class=p>)</span>

            <span class=bp>self</span><span class=o>.</span><span class=n>gen_b2</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>Variable</span><span class=p>(</span>
                <span class=n>tf</span><span class=o>.</span><span class=n>random_normal</span><span class=p>(</span>
                    <span class=n>shape</span><span class=o>=</span><span class=p>[</span><span class=mi>64</span><span class=p>],</span> <span class=n>stddev</span><span class=o>=</span><span class=mf>0.02</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>tf</span><span class=o>.</span><span class=n>float32</span><span class=p>),</span>
                <span class=n>name</span><span class=o>=</span><span class=s2>&quot;gen_b2&quot;</span><span class=p>)</span>

            <span class=bp>self</span><span class=o>.</span><span class=n>gen_w3</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>Variable</span><span class=p>(</span>
                <span class=n>tf</span><span class=o>.</span><span class=n>random_normal</span><span class=p>(</span>
                    <span class=n>shape</span><span class=o>=</span><span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>64</span><span class=p>],</span> <span class=n>stddev</span><span class=o>=</span><span class=mf>0.02</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>tf</span><span class=o>.</span><span class=n>float32</span><span class=p>),</span>
                <span class=n>name</span><span class=o>=</span><span class=s2>&quot;gen_w3&quot;</span><span class=p>)</span>

            <span class=bp>self</span><span class=o>.</span><span class=n>gen_b3</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>Variable</span><span class=p>(</span>
                <span class=n>tf</span><span class=o>.</span><span class=n>random_normal</span><span class=p>(</span>
                    <span class=n>shape</span><span class=o>=</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=n>stddev</span><span class=o>=</span><span class=mf>0.02</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>tf</span><span class=o>.</span><span class=n>float32</span><span class=p>),</span>
                <span class=n>name</span><span class=o>=</span><span class=s2>&quot;gen_b3&quot;</span><span class=p>)</span>          

            <span class=bp>self</span><span class=o>.</span><span class=n>gen_scale_w1</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>Variable</span><span class=p>(</span>
                <span class=n>tf</span><span class=o>.</span><span class=n>ones</span><span class=p>([</span><span class=mi>128</span><span class=p>]),</span> <span class=n>name</span><span class=o>=</span><span class=s2>&quot;gen_scale_w1&quot;</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>gen_offset_w1</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>Variable</span><span class=p>(</span>
                <span class=n>tf</span><span class=o>.</span><span class=n>zeros</span><span class=p>([</span><span class=mi>128</span><span class=p>]),</span> <span class=n>name</span><span class=o>=</span><span class=s2>&quot;gen_offset_w1&quot;</span><span class=p>)</span>

            <span class=bp>self</span><span class=o>.</span><span class=n>gen_scale_w2</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>Variable</span><span class=p>(</span>
                <span class=n>tf</span><span class=o>.</span><span class=n>ones</span><span class=p>([</span><span class=mi>64</span><span class=p>]),</span> <span class=n>name</span><span class=o>=</span><span class=s2>&quot;gen_scale_w2&quot;</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>gen_offset_w2</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>Variable</span><span class=p>(</span>
                <span class=n>tf</span><span class=o>.</span><span class=n>zeros</span><span class=p>([</span><span class=mi>64</span><span class=p>]),</span> <span class=n>name</span><span class=o>=</span><span class=s2>&quot;gen_offset_w2&quot;</span><span class=p>)</span>

            <span class=bp>self</span><span class=o>.</span><span class=n>keep_prob</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>placeholder</span><span class=p>(</span><span class=n>tf</span><span class=o>.</span><span class=n>float32</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>batch_size</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>placeholder</span><span class=p>(</span><span class=n>tf</span><span class=o>.</span><span class=n>int32</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>run</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>z</span><span class=p>,</span> <span class=n>is_train</span><span class=p>,</span> <span class=n>device_name</span><span class=o>=</span><span class=s1>&#39;/cpu:0&#39;</span><span class=p>):</span>

        <span class=k>with</span> <span class=n>tf</span><span class=o>.</span><span class=n>device</span><span class=p>(</span><span class=n>device_name</span><span class=p>):</span>

            <span class=n>h0</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span><span class=n>tf</span><span class=o>.</span><span class=n>nn</span><span class=o>.</span><span class=n>relu</span><span class=p>(</span><span class=n>tf</span><span class=o>.</span><span class=n>nn</span><span class=o>.</span><span class=n>xw_plus_b</span><span class=p>(</span><span class=n>z</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>gen_w0</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>gen_b0</span><span class=p>)),[</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>256</span><span class=p>])</span>

            <span class=n>gen_conv1</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>nn</span><span class=o>.</span><span class=n>conv2d_transpose</span><span class=p>(</span>
                    <span class=n>value</span><span class=o>=</span><span class=n>h0</span><span class=p>,</span>
                    <span class=nb>filter</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>gen_w1</span><span class=p>,</span>
                    <span class=n>output_shape</span><span class=o>=</span><span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>batch_size</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>128</span><span class=p>],</span>
                    <span class=n>strides</span><span class=o>=</span><span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>],</span>
                    <span class=n>padding</span><span class=o>=</span><span class=s1>&#39;SAME&#39;</span><span class=p>)</span><span class=o>+</span><span class=bp>self</span><span class=o>.</span><span class=n>gen_b1</span>

            <span class=n>h1</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>nn</span><span class=o>.</span><span class=n>leaky_relu</span><span class=p>(</span><span class=n>batch_norm</span><span class=p>(</span><span class=n>gen_conv1</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>gen_scale_w1</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>gen_offset_w1</span><span class=p>,</span>
                            <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>],</span> <span class=n>is_train</span><span class=p>,</span> <span class=n>device_name</span><span class=p>),</span><span class=n>alpha</span><span class=o>=</span><span class=mf>0.2</span><span class=p>)</span>

            <span class=n>gen_conv2</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>nn</span><span class=o>.</span><span class=n>conv2d_transpose</span><span class=p>(</span>
                    <span class=n>value</span><span class=o>=</span><span class=n>h1</span><span class=p>,</span>
                    <span class=nb>filter</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>gen_w2</span><span class=p>,</span>
                    <span class=n>output_shape</span><span class=o>=</span><span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>batch_size</span><span class=p>,</span><span class=mi>14</span><span class=p>,</span><span class=mi>14</span><span class=p>,</span><span class=mi>64</span><span class=p>],</span>
                    <span class=n>strides</span><span class=o>=</span><span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>],</span>
                    <span class=n>padding</span><span class=o>=</span><span class=s1>&#39;SAME&#39;</span><span class=p>)</span><span class=o>+</span><span class=bp>self</span><span class=o>.</span><span class=n>gen_b2</span>

            <span class=n>h2</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>nn</span><span class=o>.</span><span class=n>leaky_relu</span><span class=p>(</span><span class=n>batch_norm</span><span class=p>(</span><span class=n>gen_conv2</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>gen_scale_w2</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>gen_offset_w2</span><span class=p>,</span>
                                             <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>],</span> <span class=n>is_train</span><span class=p>,</span> <span class=n>device_name</span><span class=p>),</span><span class=n>alpha</span><span class=o>=</span><span class=mf>0.2</span><span class=p>)</span>

            <span class=n>gen_conv3</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>nn</span><span class=o>.</span><span class=n>tanh</span><span class=p>(</span>
                <span class=n>tf</span><span class=o>.</span><span class=n>nn</span><span class=o>.</span><span class=n>conv2d_transpose</span><span class=p>(</span>
                    <span class=n>value</span><span class=o>=</span><span class=n>h2</span><span class=p>,</span>
                    <span class=nb>filter</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>gen_w3</span><span class=p>,</span>
                    <span class=n>output_shape</span><span class=o>=</span><span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>batch_size</span><span class=p>,</span><span class=mi>28</span><span class=p>,</span><span class=mi>28</span><span class=p>,</span><span class=mi>1</span><span class=p>],</span>
                    <span class=n>strides</span><span class=o>=</span><span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>],</span>
                    <span class=n>padding</span><span class=o>=</span><span class=s1>&#39;SAME&#39;</span><span class=p>)</span><span class=o>+</span><span class=bp>self</span><span class=o>.</span><span class=n>gen_b3</span><span class=p>)</span>

        <span class=k>return</span> <span class=n>gen_conv3</span>
</code></pre></div></td></tr></table></p>
<p>アップサンプリングに相当する操作は<code>tf.nn.conv2d_transpose()</code>で行える。   <br />
中間層の活性化関数としてRelu関数ではなくLeakyRelu関数を適用する    <br />
GANと同様に各パラメータに名前をつけておくこと         </p>
<h4 id="discriminator">Discriminatorの実装</h4>
<p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76</pre></div></td><td class=code><div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>Discrimitor</span><span class=p>():</span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>device_name</span><span class=o>=</span><span class=s1>&#39;/cpu:0&#39;</span><span class=p>):</span>
        <span class=c1># Discrimitor parameter</span>
        <span class=k>with</span> <span class=n>tf</span><span class=o>.</span><span class=n>device</span><span class=p>(</span><span class=n>device_name</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>dis_w1</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>Variable</span><span class=p>(</span>
                <span class=n>tf</span><span class=o>.</span><span class=n>random_normal</span><span class=p>(</span>
                    <span class=n>shape</span><span class=o>=</span><span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>64</span><span class=p>],</span> <span class=n>stddev</span><span class=o>=</span><span class=mf>0.02</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>tf</span><span class=o>.</span><span class=n>float32</span><span class=p>),</span>
                <span class=n>name</span><span class=o>=</span><span class=s2>&quot;dis_w1&quot;</span><span class=p>)</span>

            <span class=bp>self</span><span class=o>.</span><span class=n>dis_b1</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>Variable</span><span class=p>(</span>
                <span class=n>tf</span><span class=o>.</span><span class=n>random_normal</span><span class=p>(</span>
                    <span class=n>shape</span><span class=o>=</span><span class=p>[</span><span class=mi>64</span><span class=p>],</span> <span class=n>stddev</span><span class=o>=</span><span class=mf>0.02</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>tf</span><span class=o>.</span><span class=n>float32</span><span class=p>),</span>
                <span class=n>name</span><span class=o>=</span><span class=s2>&quot;dis_b1&quot;</span><span class=p>)</span>

            <span class=bp>self</span><span class=o>.</span><span class=n>dis_w2</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>Variable</span><span class=p>(</span>
                <span class=n>tf</span><span class=o>.</span><span class=n>random_normal</span><span class=p>(</span>
                    <span class=n>shape</span><span class=o>=</span><span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>64</span><span class=p>,</span> <span class=mi>128</span><span class=p>],</span> <span class=n>stddev</span><span class=o>=</span><span class=mf>0.02</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>tf</span><span class=o>.</span><span class=n>float32</span><span class=p>),</span>
                <span class=n>name</span><span class=o>=</span><span class=s2>&quot;dis_w2&quot;</span><span class=p>)</span>

            <span class=bp>self</span><span class=o>.</span><span class=n>dis_b2</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>Variable</span><span class=p>(</span>
                <span class=n>tf</span><span class=o>.</span><span class=n>random_normal</span><span class=p>(</span>
                    <span class=n>shape</span><span class=o>=</span><span class=p>[</span><span class=mi>128</span><span class=p>],</span> <span class=n>stddev</span><span class=o>=</span><span class=mf>0.02</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>tf</span><span class=o>.</span><span class=n>float32</span><span class=p>),</span>
                <span class=n>name</span><span class=o>=</span><span class=s2>&quot;dis_b2&quot;</span><span class=p>)</span>

            <span class=bp>self</span><span class=o>.</span><span class=n>dis_w3</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>Variable</span><span class=p>(</span>
                <span class=n>tf</span><span class=o>.</span><span class=n>random_normal</span><span class=p>(</span>
                    <span class=n>shape</span><span class=o>=</span><span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>128</span><span class=p>,</span> <span class=mi>256</span><span class=p>],</span> <span class=n>stddev</span><span class=o>=</span><span class=mf>0.02</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>tf</span><span class=o>.</span><span class=n>float32</span><span class=p>),</span>
                <span class=n>name</span><span class=o>=</span><span class=s2>&quot;dis_w3&quot;</span><span class=p>)</span>

            <span class=bp>self</span><span class=o>.</span><span class=n>dis_b3</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>Variable</span><span class=p>(</span>
                <span class=n>tf</span><span class=o>.</span><span class=n>random_normal</span><span class=p>(</span>
                    <span class=n>shape</span><span class=o>=</span><span class=p>[</span><span class=mi>256</span><span class=p>],</span> <span class=n>stddev</span><span class=o>=</span><span class=mf>0.02</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>tf</span><span class=o>.</span><span class=n>float32</span><span class=p>),</span>
                <span class=n>name</span><span class=o>=</span><span class=s2>&quot;dis_b3&quot;</span><span class=p>)</span>

            <span class=bp>self</span><span class=o>.</span><span class=n>dis_w4</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>Variable</span><span class=p>(</span>
                <span class=n>tf</span><span class=o>.</span><span class=n>random_normal</span><span class=p>(</span>
                    <span class=n>shape</span><span class=o>=</span><span class=p>[</span><span class=mi>4</span><span class=o>*</span><span class=mi>4</span><span class=o>*</span><span class=mi>256</span><span class=p>,</span><span class=mi>1</span><span class=p>],</span> <span class=n>stddev</span><span class=o>=</span><span class=mf>0.02</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>tf</span><span class=o>.</span><span class=n>float32</span><span class=p>),</span>
                <span class=n>name</span><span class=o>=</span><span class=s2>&quot;dis_w4&quot;</span><span class=p>)</span>

            <span class=bp>self</span><span class=o>.</span><span class=n>dis_b4</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>Variable</span><span class=p>(</span>
                <span class=n>tf</span><span class=o>.</span><span class=n>random_normal</span><span class=p>(</span>
                    <span class=n>shape</span><span class=o>=</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=n>stddev</span><span class=o>=</span><span class=mf>0.02</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>tf</span><span class=o>.</span><span class=n>float32</span><span class=p>),</span>
                <span class=n>name</span><span class=o>=</span><span class=s2>&quot;dis_b4&quot;</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>run</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>x</span><span class=p>,</span> <span class=n>is_train</span><span class=p>,</span> <span class=n>device_name</span><span class=o>=</span><span class=s1>&#39;/cpu:0&#39;</span><span class=p>):</span>

        <span class=k>with</span> <span class=n>tf</span><span class=o>.</span><span class=n>device</span><span class=p>(</span><span class=n>device_name</span><span class=p>):</span>
            <span class=n>input_layer</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>28</span><span class=p>,</span> <span class=mi>28</span><span class=p>,</span> <span class=mi>1</span><span class=p>])</span>
            <span class=n>dis_conv1</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>nn</span><span class=o>.</span><span class=n>conv2d</span><span class=p>(</span>
                    <span class=nb>input</span><span class=o>=</span><span class=n>input_layer</span><span class=p>,</span>
                    <span class=nb>filter</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>dis_w1</span><span class=p>,</span>
                    <span class=n>strides</span><span class=o>=</span><span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>],</span>
                    <span class=n>padding</span><span class=o>=</span><span class=s1>&#39;SAME&#39;</span><span class=p>)</span><span class=o>+</span><span class=bp>self</span><span class=o>.</span><span class=n>dis_b1</span>

            <span class=n>h1</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>nn</span><span class=o>.</span><span class=n>leaky_relu</span><span class=p>(</span><span class=n>dis_conv1</span><span class=p>,</span><span class=n>alpha</span><span class=o>=</span><span class=mf>0.2</span><span class=p>)</span>

            <span class=n>dis_conv2</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>nn</span><span class=o>.</span><span class=n>conv2d</span><span class=p>(</span>
                    <span class=nb>input</span><span class=o>=</span><span class=n>h1</span><span class=p>,</span>
                    <span class=nb>filter</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>dis_w2</span><span class=p>,</span>
                    <span class=n>strides</span><span class=o>=</span><span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>],</span>
                    <span class=n>padding</span><span class=o>=</span><span class=s1>&#39;SAME&#39;</span><span class=p>)</span><span class=o>+</span><span class=bp>self</span><span class=o>.</span><span class=n>dis_b2</span>

            <span class=n>h2</span> <span class=o>=</span><span class=n>tf</span><span class=o>.</span><span class=n>nn</span><span class=o>.</span><span class=n>leaky_relu</span><span class=p>(</span><span class=n>dis_conv2</span><span class=p>,</span><span class=n>alpha</span><span class=o>=</span><span class=mf>0.2</span><span class=p>)</span>     

            <span class=n>dis_conv3</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>nn</span><span class=o>.</span><span class=n>conv2d</span><span class=p>(</span>
                    <span class=nb>input</span><span class=o>=</span><span class=n>h2</span><span class=p>,</span>
                    <span class=nb>filter</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>dis_w3</span><span class=p>,</span>
                    <span class=n>strides</span><span class=o>=</span><span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>],</span>
                    <span class=n>padding</span><span class=o>=</span><span class=s1>&#39;SAME&#39;</span><span class=p>)</span><span class=o>+</span><span class=bp>self</span><span class=o>.</span><span class=n>dis_b3</span>

            <span class=n>h3</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>nn</span><span class=o>.</span><span class=n>leaky_relu</span><span class=p>(</span><span class=n>dis_conv3</span><span class=p>,</span><span class=n>alpha</span><span class=o>=</span><span class=mf>0.2</span><span class=p>)</span>

            <span class=n>h3_flat</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span><span class=n>h3</span><span class=p>,[</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=mi>4</span><span class=o>*</span><span class=mi>4</span><span class=o>*</span><span class=mi>256</span><span class=p>])</span>
            <span class=n>fc</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>nn</span><span class=o>.</span><span class=n>sigmoid</span><span class=p>(</span><span class=n>tf</span><span class=o>.</span><span class=n>nn</span><span class=o>.</span><span class=n>xw_plus_b</span><span class=p>(</span><span class=n>h3_flat</span><span class=p>,</span><span class=n>weights</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>dis_w4</span><span class=p>,</span><span class=n>biases</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>dis_b4</span><span class=p>))</span>

        <span class=k>return</span> <span class=n>fc</span>
</code></pre></div></td></tr></table></p>
<p>Discriminatorにおける畳み込みはダウンサンプリングである   <br />
論文では出力を最後の畳み込み層の値を平均プーリングしシグモイド関数を適用したものであるが、ここでは論文で定義しているネットワークと同じものではないため全結合層に渡したものを出力とする。       </p>
<p>またGANでのDiscriminatorと同じようにバッチ正規化を適用しない      </p>
<h3 id="dcgan_2">DCGAN</h3>
<p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225</pre></div></td><td class=code><div class=codehilite><pre><span></span><code><span class=k>class</span> <span class=nc>DCGAN</span><span class=p>():</span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>using_gpu</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>device_name</span> <span class=o>=</span> <span class=s1>&#39;/cpu:0&#39;</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>using_gpu</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>device_name</span> <span class=o>=</span> <span class=s1>&#39;/gpu:0&#39;</span>

        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;using : </span><span class=si>{}</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>device_name</span><span class=p>))</span>

        <span class=k>with</span> <span class=n>tf</span><span class=o>.</span><span class=n>device</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>device_name</span><span class=p>):</span>

            <span class=bp>self</span><span class=o>.</span><span class=n>G_is_train</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>placeholder</span><span class=p>(</span><span class=n>tf</span><span class=o>.</span><span class=n>bool</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>D_is_train</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>placeholder</span><span class=p>(</span><span class=n>tf</span><span class=o>.</span><span class=n>bool</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>input_X</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>placeholder</span><span class=p>(</span><span class=n>tf</span><span class=o>.</span><span class=n>float32</span><span class=p>,</span> <span class=n>shape</span><span class=o>=</span><span class=p>(</span><span class=kc>None</span><span class=p>,</span> <span class=mi>28</span> <span class=o>*</span> <span class=mi>28</span><span class=p>))</span>

            <span class=c1># t0は0のラベルを格納し、t1は1のラベルを格納する</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>label_t0</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>placeholder</span><span class=p>(</span><span class=n>tf</span><span class=o>.</span><span class=n>float32</span><span class=p>,</span> <span class=n>shape</span><span class=o>=</span><span class=p>(</span><span class=kc>None</span><span class=p>,</span> <span class=mi>1</span><span class=p>))</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>label_t1</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>placeholder</span><span class=p>(</span><span class=n>tf</span><span class=o>.</span><span class=n>float32</span><span class=p>,</span> <span class=n>shape</span><span class=o>=</span><span class=p>(</span><span class=kc>None</span><span class=p>,</span> <span class=mi>1</span><span class=p>))</span>

            <span class=c1># Generator</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>generator</span> <span class=o>=</span> <span class=n>Generator</span><span class=p>(</span><span class=n>device_name</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>device_name</span><span class=p>)</span>
            <span class=c1># 生成モデルに必要なノイズの入れ物</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>gen_z</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>placeholder</span><span class=p>(</span><span class=n>tf</span><span class=o>.</span><span class=n>float32</span><span class=p>,</span> <span class=n>shape</span><span class=o>=</span><span class=p>(</span><span class=kc>None</span><span class=p>,</span> <span class=mi>100</span><span class=p>))</span>
            <span class=c1># Discrimitor</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>discrimitor</span> <span class=o>=</span> <span class=n>Discrimitor</span><span class=p>(</span><span class=n>device_name</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>device_name</span><span class=p>)</span>

            <span class=c1># weight decay</span>
            <span class=n>gen_norm_term</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>nn</span><span class=o>.</span><span class=n>l2_loss</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>generator</span><span class=o>.</span><span class=n>gen_w2</span><span class=p>)</span>
                            <span class=o>+</span> <span class=n>tf</span><span class=o>.</span><span class=n>nn</span><span class=o>.</span><span class=n>l2_loss</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>generator</span><span class=o>.</span><span class=n>gen_w3</span><span class=p>)</span>
            <span class=n>gen_lambda_</span> <span class=o>=</span> <span class=mf>0.001</span>

            <span class=n>dis_norm_term</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>nn</span><span class=o>.</span><span class=n>l2_loss</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>discrimitor</span><span class=o>.</span><span class=n>dis_w2</span><span class=p>)</span>
                            <span class=o>+</span> <span class=n>tf</span><span class=o>.</span><span class=n>nn</span><span class=o>.</span><span class=n>l2_loss</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>discrimitor</span><span class=o>.</span><span class=n>dis_w3</span><span class=p>)</span>
            <span class=n>dis_lambda_</span> <span class=o>=</span> <span class=mf>0.001</span>

            <span class=c1># 訓練データの識別予測</span>
            <span class=n>input_X</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>discrimitor</span><span class=o>.</span><span class=n>run</span><span class=p>(</span>
                          <span class=bp>self</span><span class=o>.</span><span class=n>input_X</span><span class=p>,</span>
                          <span class=n>is_train</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>D_is_train</span><span class=p>,</span>
                          <span class=n>device_name</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>device_name</span><span class=p>)</span>

            <span class=c1># 生成されたデータの識別予測</span>
            <span class=n>generated_X</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>discrimitor</span><span class=o>.</span><span class=n>run</span><span class=p>(</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>generator</span><span class=o>.</span><span class=n>run</span><span class=p>(</span>
                    <span class=n>z</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>gen_z</span><span class=p>,</span>
                    <span class=n>is_train</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>G_is_train</span><span class=p>,</span>
                    <span class=n>device_name</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>device_name</span><span class=p>),</span>
                <span class=n>is_train</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>D_is_train</span><span class=p>,</span>
                <span class=n>device_name</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>device_name</span><span class=p>)</span>

            <span class=bp>self</span><span class=o>.</span><span class=n>dis_entropy_X</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>nn</span><span class=o>.</span><span class=n>sigmoid_cross_entropy_with_logits</span><span class=p>(</span>
                <span class=n>labels</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>label_t1</span><span class=p>,</span> <span class=n>logits</span><span class=o>=</span><span class=n>input_X</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>dis_entropy_G</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>nn</span><span class=o>.</span><span class=n>sigmoid_cross_entropy_with_logits</span><span class=p>(</span>
                <span class=n>labels</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>label_t0</span><span class=p>,</span> <span class=n>logits</span><span class=o>=</span><span class=n>generated_X</span><span class=p>)</span>

            <span class=bp>self</span><span class=o>.</span><span class=n>dis_loss</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>reduce_mean</span><span class=p>(</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>dis_entropy_X</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>dis_entropy_G</span>
            <span class=p>)</span> <span class=o>+</span> <span class=n>dis_norm_term</span> <span class=o>*</span> <span class=n>dis_lambda_</span>

            <span class=bp>self</span><span class=o>.</span><span class=n>gen_entropy</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>nn</span><span class=o>.</span><span class=n>sigmoid_cross_entropy_with_logits</span><span class=p>(</span>
                <span class=n>labels</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>label_t1</span><span class=p>,</span> <span class=n>logits</span><span class=o>=</span><span class=n>generated_X</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>gen_loss</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>reduce_mean</span><span class=p>(</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>gen_entropy</span><span class=p>)</span> <span class=c1>#+ gen_norm_term * gen_lambda_</span>

            <span class=c1># 最適化する際にDならDのみのパラメータを、GならGのみのパラメータを更新するようにしたいのでモデル別の変数を取得する</span>
            <span class=n>dis_vars</span> <span class=o>=</span> <span class=p>[</span>
                <span class=n>x</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=n>tf</span><span class=o>.</span><span class=n>trainable_variables</span><span class=p>()</span> <span class=k>if</span> <span class=s2>&quot;dis_&quot;</span> <span class=ow>in</span> <span class=n>x</span><span class=o>.</span><span class=n>name</span>
            <span class=p>]</span>
            <span class=n>gen_vars</span> <span class=o>=</span> <span class=p>[</span>
                <span class=n>x</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=n>tf</span><span class=o>.</span><span class=n>trainable_variables</span><span class=p>()</span> <span class=k>if</span> <span class=s2>&quot;gen_&quot;</span> <span class=ow>in</span> <span class=n>x</span><span class=o>.</span><span class=n>name</span>
            <span class=p>]</span>

            <span class=c1># 識別モデルDの最適化</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>opt_d</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>train</span><span class=o>.</span><span class=n>AdamOptimizer</span><span class=p>(</span><span class=mf>0.0002</span><span class=p>,</span><span class=n>beta1</span><span class=o>=</span><span class=mf>0.1</span><span class=p>)</span><span class=o>.</span><span class=n>minimize</span><span class=p>(</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>dis_loss</span><span class=p>,</span> <span class=n>var_list</span><span class=o>=</span><span class=p>[</span><span class=n>dis_vars</span><span class=p>])</span>
            <span class=c1># 生成モデルGの最適化</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>opt_g</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>train</span><span class=o>.</span><span class=n>AdamOptimizer</span><span class=p>(</span><span class=mf>0.0002</span><span class=p>,</span> <span class=n>beta1</span><span class=o>=</span><span class=mf>0.5</span><span class=p>)</span><span class=o>.</span><span class=n>minimize</span><span class=p>(</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>gen_loss</span><span class=p>,</span> <span class=n>var_list</span><span class=o>=</span><span class=p>[</span><span class=n>gen_vars</span><span class=p>])</span>

    <span class=k>def</span> <span class=nf>train</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span>
              <span class=n>X_train</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
              <span class=n>batch_size</span><span class=o>=</span><span class=mi>100</span><span class=p>,</span>
              <span class=n>epoch_num</span><span class=o>=</span><span class=mi>1000</span><span class=p>,</span>
              <span class=n>imgpath</span><span class=o>=</span><span class=s1>&#39;./mnist_DCGAN_images/&#39;</span><span class=p>,</span>
              <span class=n>ckptpath</span><span class=o>=</span><span class=s1>&#39;./mnist_DCGAN_checkpoints/&#39;</span><span class=p>,</span>
              <span class=n>log_file</span><span class=o>=</span><span class=s1>&#39;mnist_DCGAN_loss_log.csv&#39;</span><span class=p>,</span>
              <span class=n>init</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>

        <span class=k>if</span> <span class=n>X_train</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>(</span><span class=s2>&quot;X_train is None&quot;</span><span class=p>)</span>

        <span class=c1># 訓練途中で生成データを作成して保存したいのでその保存先の作成</span>
        <span class=n>p</span> <span class=o>=</span> <span class=n>Path</span><span class=p>(</span><span class=n>imgpath</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=n>p</span><span class=o>.</span><span class=n>is_dir</span><span class=p>()):</span>
            <span class=n>p</span><span class=o>.</span><span class=n>mkdir</span><span class=p>()</span>

        <span class=c1># モデルパラメータのチェックポイントの保存先</span>
        <span class=n>ckpt_p</span> <span class=o>=</span> <span class=n>Path</span><span class=p>(</span><span class=n>ckptpath</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=p>(</span><span class=n>ckpt_p</span><span class=o>.</span><span class=n>is_dir</span><span class=p>()):</span>
            <span class=n>ckpt_p</span><span class=o>.</span><span class=n>mkdir</span><span class=p>()</span>

        <span class=n>config</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>ConfigProto</span><span class=p>()</span>
        <span class=n>config</span><span class=o>.</span><span class=n>gpu_options</span><span class=o>.</span><span class=n>allow_growth</span> <span class=o>=</span> <span class=kc>True</span>

        <span class=n>saver</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>train</span><span class=o>.</span><span class=n>Saver</span><span class=p>()</span>

        <span class=n>sess</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>Session</span><span class=p>()</span>

        <span class=k>if</span> <span class=p>(</span><span class=n>init</span><span class=p>):</span>
            <span class=n>sess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>tf</span><span class=o>.</span><span class=n>global_variables_initializer</span><span class=p>())</span>
            <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Initialize&#39;</span><span class=p>)</span>

        <span class=n>ckpt</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>train</span><span class=o>.</span><span class=n>get_checkpoint_state</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>ckpt_p</span><span class=o>.</span><span class=n>absolute</span><span class=p>()))</span>
        <span class=k>if</span> <span class=n>ckpt</span><span class=p>:</span>
            <span class=c1># checkpointファイルから最後に保存したモデルへのパスを取得する</span>
            <span class=n>last_model</span> <span class=o>=</span> <span class=n>ckpt</span><span class=o>.</span><span class=n>model_checkpoint_path</span>
            <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;load </span><span class=si>{0}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>last_model</span><span class=p>))</span>
            <span class=c1># 学習済みモデルを読み込む</span>
            <span class=n>saver</span><span class=o>.</span><span class=n>restore</span><span class=p>(</span><span class=n>sess</span><span class=p>,</span> <span class=n>last_model</span><span class=p>)</span>

        <span class=n>step</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>X_train</span><span class=p>)</span> <span class=o>//</span> <span class=n>batch_size</span>
        <span class=c1>#step = mnist.train.num_examples // batch_size</span>

        <span class=c1># 正解ラベルのミニバッチ</span>
        <span class=n>t1_batch</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>ones</span><span class=p>((</span><span class=n>batch_size</span><span class=p>,</span> <span class=mi>1</span><span class=p>),</span> <span class=n>dtype</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>float32</span><span class=p>)</span>
        <span class=n>t0_batch</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>zeros</span><span class=p>((</span><span class=n>batch_size</span><span class=p>,</span> <span class=mi>1</span><span class=p>),</span> <span class=n>dtype</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>float32</span><span class=p>)</span>

        <span class=k>for</span> <span class=n>epoch</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>epoch_num</span><span class=p>):</span>

            <span class=n>perm</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>permutation</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>X_train</span><span class=p>))</span>
            <span class=c1># １エポックごとにかかる時間の計測</span>
            <span class=n>start</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
            <span class=k>for</span> <span class=n>k</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>step</span><span class=p>):</span>
                <span class=c1>#X_batch = mnist.train.next_batch(batch_size)[0] /255.</span>
                <span class=n>X_batch</span> <span class=o>=</span> <span class=n>X_train</span><span class=p>[</span><span class=n>perm</span><span class=p>][</span><span class=n>k</span> <span class=o>*</span> <span class=n>batch_size</span><span class=p>:(</span><span class=n>k</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span> <span class=o>*</span> <span class=n>batch_size</span><span class=p>]</span>

                <span class=c1># Train Discrimitor</span>
                <span class=c1># ノイズ事前分布からノイズをミニバッチ分取得</span>
                <span class=n>noise_z</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>uniform</span><span class=p>(</span>
                    <span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=n>size</span><span class=o>=</span><span class=p>[</span><span class=n>batch_size</span><span class=p>,</span><span class=mi>100</span><span class=p>])</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>float32</span><span class=p>)</span>

                <span class=n>sess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>opt_d</span><span class=p>,</span>
                    <span class=n>feed_dict</span><span class=o>=</span><span class=p>{</span>
                        <span class=bp>self</span><span class=o>.</span><span class=n>input_X</span><span class=p>:</span> <span class=n>X_batch</span><span class=p>,</span>
                        <span class=bp>self</span><span class=o>.</span><span class=n>D_is_train</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
                        <span class=bp>self</span><span class=o>.</span><span class=n>G_is_train</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span>
                        <span class=bp>self</span><span class=o>.</span><span class=n>gen_z</span><span class=p>:</span> <span class=n>noise_z</span><span class=p>,</span>
                        <span class=bp>self</span><span class=o>.</span><span class=n>generator</span><span class=o>.</span><span class=n>keep_prob</span><span class=p>:</span> <span class=mf>1.0</span><span class=p>,</span>
                        <span class=bp>self</span><span class=o>.</span><span class=n>generator</span><span class=o>.</span><span class=n>batch_size</span><span class=p>:</span> <span class=n>batch_size</span><span class=p>,</span>
                        <span class=bp>self</span><span class=o>.</span><span class=n>label_t1</span><span class=p>:</span> <span class=n>t1_batch</span><span class=p>,</span>
                        <span class=bp>self</span><span class=o>.</span><span class=n>label_t0</span><span class=p>:</span> <span class=n>t0_batch</span>
                    <span class=p>})</span>

                <span class=k>if</span> <span class=n>k</span> <span class=o>%</span> <span class=mi>1</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
                    <span class=c1># Train Generator</span>
                    <span class=c1># ノイズ事前分布からノイズをミニバッチ分取得</span>
                    <span class=n>noise_z</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>uniform</span><span class=p>(</span>
                        <span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=n>size</span><span class=o>=</span><span class=p>[</span><span class=n>batch_size</span><span class=p>,</span><span class=mi>100</span><span class=p>])</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>float32</span><span class=p>)</span>
                    <span class=n>sess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span>
                        <span class=bp>self</span><span class=o>.</span><span class=n>opt_g</span><span class=p>,</span>
                        <span class=n>feed_dict</span><span class=o>=</span><span class=p>{</span>
                            <span class=bp>self</span><span class=o>.</span><span class=n>gen_z</span><span class=p>:</span> <span class=n>noise_z</span><span class=p>,</span>
                            <span class=bp>self</span><span class=o>.</span><span class=n>D_is_train</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span>
                            <span class=bp>self</span><span class=o>.</span><span class=n>G_is_train</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
                            <span class=bp>self</span><span class=o>.</span><span class=n>generator</span><span class=o>.</span><span class=n>keep_prob</span><span class=p>:</span> <span class=mf>0.5</span><span class=p>,</span>
                            <span class=bp>self</span><span class=o>.</span><span class=n>generator</span><span class=o>.</span><span class=n>batch_size</span><span class=p>:</span> <span class=n>batch_size</span><span class=p>,</span>
                            <span class=bp>self</span><span class=o>.</span><span class=n>label_t1</span><span class=p>:</span> <span class=n>t1_batch</span>
                        <span class=p>})</span>

            <span class=c1># 1epoch終了時の損失を表示</span>
            <span class=n>noise_z</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>uniform</span><span class=p>(</span>
                <span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=n>size</span><span class=o>=</span><span class=p>[</span><span class=n>batch_size</span><span class=p>,</span><span class=mi>100</span><span class=p>])</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>float32</span><span class=p>)</span>
            <span class=n>train_dis_loss</span> <span class=o>=</span> <span class=n>sess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>dis_loss</span><span class=p>,</span>
                <span class=n>feed_dict</span><span class=o>=</span><span class=p>{</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>input_X</span><span class=p>:</span> <span class=n>X_batch</span><span class=p>,</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>D_is_train</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>G_is_train</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>gen_z</span><span class=p>:</span> <span class=n>noise_z</span><span class=p>,</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>generator</span><span class=o>.</span><span class=n>keep_prob</span><span class=p>:</span> <span class=mf>1.0</span><span class=p>,</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>generator</span><span class=o>.</span><span class=n>batch_size</span><span class=p>:</span> <span class=n>batch_size</span><span class=p>,</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>label_t1</span><span class=p>:</span> <span class=n>t1_batch</span><span class=p>,</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>label_t0</span><span class=p>:</span> <span class=n>t0_batch</span>
                <span class=p>})</span>

            <span class=n>train_gen_loss</span> <span class=o>=</span> <span class=n>sess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>gen_loss</span><span class=p>,</span>
                <span class=n>feed_dict</span><span class=o>=</span><span class=p>{</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>gen_z</span><span class=p>:</span> <span class=n>noise_z</span><span class=p>,</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>D_is_train</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>G_is_train</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>generator</span><span class=o>.</span><span class=n>keep_prob</span><span class=p>:</span> <span class=mf>1.0</span><span class=p>,</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>generator</span><span class=o>.</span><span class=n>batch_size</span><span class=p>:</span> <span class=n>batch_size</span><span class=p>,</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>label_t1</span><span class=p>:</span> <span class=n>t1_batch</span>
                <span class=p>})</span>
            <span class=nb>print</span><span class=p>(</span>
                <span class=s2>&quot;[Train] epoch: </span><span class=si>%d</span><span class=s2>, dis loss: </span><span class=si>%f</span><span class=s2> , gen loss : </span><span class=si>%f</span><span class=s2>  Time : </span><span class=si>%f</span><span class=s2>&quot;</span> <span class=o>%</span>
                <span class=p>(</span><span class=n>epoch</span><span class=p>,</span> <span class=n>train_dis_loss</span><span class=p>,</span> <span class=n>train_gen_loss</span><span class=p>,</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>start</span><span class=p>))</span>

            <span class=n>f</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=n>log_file</span><span class=p>,</span> <span class=s1>&#39;a&#39;</span><span class=p>)</span>
            <span class=n>log_writer</span> <span class=o>=</span> <span class=n>csv</span><span class=o>.</span><span class=n>writer</span><span class=p>(</span><span class=n>f</span><span class=p>,</span> <span class=n>lineterminator</span><span class=o>=</span><span class=s1>&#39;</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>)</span>
            <span class=n>loss_list</span> <span class=o>=</span> <span class=p>[]</span>
            <span class=n>loss_list</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>epoch</span><span class=p>)</span>
            <span class=n>loss_list</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>train_dis_loss</span><span class=p>)</span>
            <span class=n>loss_list</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>train_gen_loss</span><span class=p>)</span>
            <span class=c1># 損失の値を書き込む</span>
            <span class=n>log_writer</span><span class=o>.</span><span class=n>writerow</span><span class=p>(</span><span class=n>loss_list</span><span class=p>)</span>
            <span class=n>f</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>

            <span class=n>saver</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>sess</span><span class=p>,</span> <span class=nb>str</span><span class=p>(</span><span class=n>ckpt_p</span><span class=o>.</span><span class=n>absolute</span><span class=p>())</span> <span class=o>+</span> <span class=s1>&#39;/DCGAN-mnist&#39;</span><span class=p>)</span>

            <span class=c1># 10epoch終了毎に生成モデルから1枚の画像を生成する</span>
            <span class=k>if</span> <span class=n>epoch</span> <span class=o>%</span> <span class=mi>2</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
                <span class=n>noise_z</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>uniform</span><span class=p>(</span>
                    <span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span> <span class=n>size</span><span class=o>=</span><span class=p>[</span><span class=mi>5</span><span class=p>,</span><span class=mi>100</span><span class=p>])</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>float32</span><span class=p>)</span>

                <span class=n>z_const</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>constant</span><span class=p>(</span><span class=n>noise_z</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>tf</span><span class=o>.</span><span class=n>float32</span><span class=p>)</span>
                <span class=n>gen_imgs</span> <span class=o>=</span> <span class=p>((</span><span class=n>sess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>generator</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>z_const</span><span class=p>,</span> <span class=n>is_train</span><span class=o>=</span><span class=kc>False</span><span class=p>),</span>
                    <span class=n>feed_dict</span><span class=o>=</span><span class=p>{</span><span class=bp>self</span><span class=o>.</span><span class=n>generator</span><span class=o>.</span><span class=n>keep_prob</span><span class=p>:</span> <span class=mf>1.0</span><span class=p>,</span><span class=bp>self</span><span class=o>.</span><span class=n>generator</span><span class=o>.</span><span class=n>batch_size</span><span class=p>:</span> <span class=mi>5</span><span class=p>})</span><span class=o>*</span> <span class=mf>0.5</span><span class=p>)</span><span class=o>+</span><span class=mf>0.5</span><span class=p>)</span><span class=o>*</span><span class=mf>255.</span>
                <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=mi>5</span><span class=p>):</span>
                    <span class=n>Image</span><span class=o>.</span><span class=n>fromarray</span><span class=p>(</span><span class=n>gen_imgs</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span>
                        <span class=mi>28</span><span class=p>,</span> <span class=mi>28</span><span class=p>))</span><span class=o>.</span><span class=n>convert</span><span class=p>(</span><span class=s1>&#39;RGB&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>save</span><span class=p>(</span>
                            <span class=nb>str</span><span class=p>(</span><span class=n>p</span><span class=o>.</span><span class=n>absolute</span><span class=p>())</span> <span class=o>+</span>
                            <span class=s1>&#39;/generate_img_epoch</span><span class=si>{0}</span><span class=s1>_</span><span class=si>{1}</span><span class=s1>.jpg&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>epoch</span><span class=p>,</span><span class=n>i</span><span class=p>))</span>
</code></pre></div></td></tr></table></p>
<h3 id="_1">学習</h3>
<p>Generatorの出力に活性化関数Tanhを使っているため、<code>[-1,1]</code>の範囲の値を出力が取りうる。     <br />
そのため訓練データも<code>[-1,1]</code>の範囲の値を取るように前処理を行う必要がある。        </p>
<p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><code><span class=n>X_train</span> <span class=o>=</span> <span class=p>(</span><span class=n>dataset</span><span class=o>.</span><span class=n>train</span><span class=o>.</span><span class=n>images</span> <span class=o>-</span> <span class=mf>0.5</span> <span class=p>)</span> <span class=o>/</span> <span class=mf>0.5</span>
</code></pre></div></td></tr></table></p>
<p>学習を行う       </p>
<p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class=code><div class=codehilite><pre><span></span><code><span class=kn>import</span> <span class=nn>tensorflow</span> <span class=k>as</span> <span class=nn>tf</span>

<span class=n>device_name</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>test</span><span class=o>.</span><span class=n>gpu_device_name</span><span class=p>()</span>
<span class=k>if</span> <span class=n>device_name</span> <span class=o>!=</span> <span class=s1>&#39;/device:GPU:0&#39;</span><span class=p>:</span>
  <span class=k>raise</span> <span class=ne>SystemError</span><span class=p>(</span><span class=s1>&#39;GPU device not found&#39;</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Found GPU at: </span><span class=si>{}</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>device_name</span><span class=p>))</span>

<span class=n>model</span> <span class=o>=</span> <span class=n>DCGAN</span><span class=p>(</span><span class=n>using_gpu</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=n>model</span><span class=o>.</span><span class=n>train</span><span class=p>(</span>
    <span class=n>X_train</span><span class=o>=</span><span class=n>X_train</span><span class=p>,</span>
    <span class=n>batch_size</span><span class=o>=</span><span class=mi>100</span><span class=p>,</span>
    <span class=n>epoch_num</span><span class=o>=</span><span class=mi>51</span><span class=p>,</span>
    <span class=n>init</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</code></pre></div></td></tr></table></p>
<p>50epochで次のような画像が生成された       </p>
<p><img alt="" src="/img/dcgan_generate_img.png" />       </p>
<p>学習経過      </p>
<p><img alt="" src="/img/dcgan_loss.png" />       </p>
<h2 id="notebook">Notebook</h2>
<p><a href="https://github.com/FaBoPlatform/TensorFlow/blob/master/notebooks/DCGAN_mnist.ipynb">https://github.com/FaBoPlatform/TensorFlow/blob/master/notebooks/DCGAN_mnist.ipynb</a></p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="">
        
          <a href="../../matplotlib/matplotlib_point/" title="点をうつ" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  前
                </span>
                点をうつ
              </div>
            </div>
          </a>
        
        
          <a href="../../model_GAN/Tensorflow_GAN_mnist/" title="MNIST GAN(Generative Adversarial Network)" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  次
                </span>
                MNIST GAN(Generative Adversarial Network)
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.83fe6e3c.min.js"></script>
      <script src="../../assets/javascripts/bundle.7e1cb91c.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3078\u30b3\u30d4\u30fc", "clipboard.copied": "\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f", "search.config.lang": "ja", "search.config.pipeline": "", "search.config.separator": "[\\s\\-\u3000\u3001\u3002\uff0c\uff0e]+", "search.result.placeholder": "\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044", "search.result.none": "\u4f55\u3082\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f", "search.result.one": "1\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.other": "#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.37585f48.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="../../javascripts/extra.js"></script>
      
    
  </body>
</html>